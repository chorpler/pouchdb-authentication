{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/utils.ts","webpack:///./node_modules/pouchdb-utils/node_modules/pouchdb-collections/lib/index.es.js","webpack:///./node_modules/pouchdb-utils/node_modules/pouchdb-errors/lib/index.es.js","webpack:///./node_modules/pouchdb-utils/lib/index-browser.es.js","webpack:///./node_modules/events/events.js","webpack:///./node_modules/pouchdb-binary-utils/lib/index-browser.es.js","webpack:///./node_modules/inherits/inherits_browser.js","webpack:///./node_modules/argsarray/index.js","webpack:///./node_modules/pouchdb-utils/node_modules/spark-md5/spark-md5.js","webpack:///./node_modules/immediate/lib/browser.js","webpack:///./node_modules/pouchdb-utils/node_modules/uuid/index.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/pouchdb-utils/node_modules/uuid/lib/rng-browser.js","webpack:///./node_modules/pouchdb-utils/node_modules/uuid/lib/bytesToUuid.js","webpack:///./node_modules/pouchdb-utils/node_modules/pouchdb-md5/lib/index-browser.es.js","webpack:///./src/index.ts","webpack:///./src/admins.ts","webpack:///./node_modules/pouchdb-fetch/lib/index-browser.es.js","webpack:///./node_modules/pouchdb-utils/node_modules/uuid/v1.js","webpack:///./node_modules/pouchdb-utils/node_modules/uuid/v4.js","webpack:///./src/authentication.ts","webpack:///./src/users.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","pouchdb_binary_utils_1","pouchdb_fetch_1","pouchdb_utils_1","getBaseUrl","db","fullName","prefix","endsWith","uri","parseUri","path","parentPath","substr","split","slice","join","protocol","host","port","getBasicAuthHeaders","auth","__opts","user","password","username","Headers","str","token","btoa","decodeURIComponent","encodeURIComponent","headers","set","doFetch","url","opts","assign","newurl","body","JSON","stringify","fetch","res","_a","sent","ok","json","content","Error","err_1","message","AuthError","_super","msg","_this","this","status","error","taken","captureStackTrace","__extends","ExportedMap","mangle","unmangle","substring","Map$1","_store","Set$1","array","Array","isArray","len","length","add","mangled","has","delete","forEach","cb","keys","size","Map","Set","prop","getOwnPropertyDescriptor","species","supportsMapAndSet","PouchError","reason","inherits_browser_default","toString","INVALID_ID","MISSING_ID","RESERVED_ID","BAD_REQUEST","createError","CustomPouchError","undefined","cloneBinaryObject","ArrayBuffer","buff","target","byteLength","targetArray","Uint8Array","sourceArray","cloneArrayBuffer","type","webkitSlice","__webpack_exports__","adapterFun","assign$1","bulkGet","Changes","clone$1","defaultBackOff","explainError","filterChange","flatten","res$1","guardedConsole","hasLocalStorage","invalidIdError","isRemote","listenerCount","normalizeDesignDocFunctionName","once","parseDesignDocFunctionName","pick","rev","scopeEval","toPromise","upsert","index_browser_es_uuid","browser_default","a","funcToString","Function","objectCtorString","newObject","Date","toISOString","Blob","isBinaryObject","proto","getPrototypeOf","Ctor","constructor","isPlainObject","fun","called","argsarray_default","args","apply","func","self","usedCB","pop","promise","Promise","fulfill","reject","resp","callback","err","mesg","push","then","e","result","_closed","_destroyed","listeners","logArgs","emit","origCallback","responseArgs","concat","logApiCall","taskqueue","isReady","addTask","failed","obj","arr","hasLocal","MAX_NUM_CONCURRENT_REQUESTS","identityFunction","x","formatResultForOpenRevsGet","requests","docs","requestsById","request","id","numDocs","numDone","perDocResults","checkDone","results","info","allRequests","nextBatch","upTo","Math","min","batch","offset","docId","j","docIdx","docRequests","docOpts","open_revs","map","filter","formatResult","param","processBatch","localStorage","setItem","getItem","events","_listeners","addEventListener","method","console","arguments","max","parseInt","maxTimeout","random","randomNumber","addListener","dbName","inprogress","eventFunction","on","changesOpts","changes","seq","since","cancelled","onChange","removeListener","notifyLocalWindows","notify","to","index","nextSource","nextKey","req","hasFilter","query","query_params","change","doc","filterReturn","tryFilter","include_docs","attachments","att","_attachments","stub","arrs","match","test","_remote","ee","parts","normalized","qName","qParser","parser","exec","encoded","indexOf","replace","$0","$1","$2","source","scope","values","diffFun","docRev","_rev","newDoc","updated","_id","put","tryAndPut","deterministic_revs","clonedDoc","_rev_tree","index_browser_es","uuid_default","v4","toLowerCase","EventEmitter","_events","_maxListeners","isFunction","arg","isObject","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","TypeError","er","handler","context","listener","newListener","warned","trace","fired","g","list","position","splice","removeAllListeners","evlistener","emitter","thisAtob","thisBtoa","b64ToBluffer","binaryStringToArrayBuffer","binStringToBluffer","createBlob","blobToBase64","blobToBinaryString","readAsArrayBuffer","readAsBinaryString","typedBuffer","atob","properties","builder","BlobBuilder","MSBlobBuilder","MozBlobBuilder","WebKitBlobBuilder","append","getBlob","bin","buf","charCodeAt","binString","b64","blob","reader","FileReader","hasBinaryString","onloadend","buffer","binary","bytes","String","fromCharCode","arrayBufferToBinaryString","blobOrBuffer","base64","ctor","superCtor","super_","writable","configurable","TempCtor","hex_chr","md5cycle","k","b","md5blk","md5blks","md5blk_array","md51","tail","tmp","lo","hi","state","rhex","hex","toUtf8","unescape","hexToBinaryString","SparkMD5","reset","clamp","val","from","num","begin","end","appendBinary","contents","_buff","_length","_hash","raw","ret","_finish","getState","hash","setState","destroy","hashBinary","first","second","returnUInt8Array","subarray","utf8Str2ArrayBuffer","md51_array","factory","global","scheduleDrain","draining","Mutation","MutationObserver","WebKitMutationObserver","observer","nextTick","element","document","createTextNode","observe","characterData","data","setImmediate","MessageChannel","createElement","scriptEl","onreadystatechange","parentNode","removeChild","documentElement","appendChild","setTimeout","channel","port1","onmessage","port2","postMessage","queue","oldQueue","task","v1","uuid","window","getRandomValues","crypto","msCrypto","rnds8","rnds","byteToHex","bth","stringMd5","spark_md5__WEBPACK_IMPORTED_MODULE_1__","spark_md5__WEBPACK_IMPORTED_MODULE_1___default","string","admins_1","authentication_1","users_1","plugin","login","logIn","logout","logOut","getSession","getMembership","signUpAdmin","deleteAdmin","getUsersDatabaseUrl","signup","signUp","getUser","putUser","deleteUser","changePassword","changeUsername","PouchDB","utils_1","utils_2","utils_3","utils_4","getConfigUrl","nodeName","dbURL","ajaxOpts","ajax","membership","all_nodes","err_2","configUrl","processData","err_4","f","h","AbortController","abort","_nodeId","_clockseq","rng","bytesToUuid","_lastMSecs","_lastNSecs","options","node","clockseq","seedBytes","msecs","getTime","nsecs","dt","tl","tmh","ii","Content-Type","pouchdb_utils_2","updateUser","reservedWords","metadata","roles","oldUsername","newUsername","db_1","USERNAME_PREFIX","fetch_1","updateUser_1","updateOpts","newUser","clone","_deleted"],"mappings":"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","file":"pouchdb-authentication.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"build/\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 13);\n","import   * as PouchDB      from \"pouchdb-core\"          ;\nimport { btoa             } from \"pouchdb-binary-utils\" ;\nimport { Headers          } from \"pouchdb-fetch\"        ;\nimport { assign, parseUri } from \"pouchdb-utils\"        ;\n\ninterface AuthHeader {\n  username?:string;\n  password?:string;\n}\n\ninterface PDBOpts {\n  adapter?:string;\n  skip_setup?:boolean;\n  auth?:AuthHeader;\n  prefix?:string;\n  deterministic_revs?:boolean;\n  name?:string;\n}\n\ninterface UserContext {\n  name: string;\n  roles?: string[];\n}\n\ninterface User extends UserContext {\n}\n\ninterface PouchDBUserDoc extends User {\n  _id?:string;\n  _rev?:string;\n  [propName:string]:any;\n}\n\ninterface LoginResponse extends PouchDB.Core.BasicResponse, UserContext {\n}\n\ninterface SessionResponse extends PouchDB.Core.BasicResponse {\n  info: {\n    authenticated: string;\n    authentication_db: string;\n    authentication_handlers: string[];\n  };\n  userCtx: UserContext;\n}\n\ninterface PutUserOptions extends PouchDB.Core.Options {\n  metadata?: any;\n  roles?: string[];\n}\n\ninterface CouchNodeMembership {\n  all_nodes:string[];\n  cluster_nodes:string[];\n}\n\ninterface Database<Content extends {} = {}> extends PouchDB.Static {\n    /**\n     * Log in an existing user.\n     * Throws an error if the user doesn't exist yet, the password is wrong, the HTTP server is unreachable, or a meteor struck your computer.\n     */\n  logIn(username: string, password: string,\n        options?: PouchDB.Core.Options): Promise<LoginResponse>;\n\n  /**\n   * Logs out whichever user is currently logged in.\n   * If nobody's logged in, it does nothing and just returns `{\"ok\" : true}`.\n   */\n  logOut(): Promise<PouchDB.Core.BasicResponse>;\n\n  /**\n   * Returns information about the CouchDB node membership of the server for the current database.\n   */\n  getMembership(options?:LoginOptions):Promise<CouchNodeMembership>;\n\n  /**\n   * Returns information about the current session.\n   * In other words, this tells you which user is currently logged in.\n   */\n  getSession(): Promise<SessionResponse>;\n\n  /**\n   * Sign up a new user who doesn't exist yet.\n   * Throws an error if the user already exists or if the username is invalid, or if some network error occurred.\n   * CouchDB has some limitations on user names (e.g. they cannot contain the character `:`).\n   */\n  signUp(username: string, password: string,\n        options?: PutUserOptions): Promise<PouchDB.Core.Response>;\n\n  /**\n   * Returns the user document associated with a username.\n   * (CouchDB, in a pleasing show of consistency, stores users as JSON documents in the special `_users` database.)\n   * This is the primary way to get metadata about a user.\n   */\n  getUser(username: string, options?: PouchDB.Core.Options):Promise<PouchDB.Core.Document<Content & User> & PouchDB.Core.GetMeta>;\n  // getUser(username: string, options?: PouchDB.Core.Options):Promise<PouchDBUserDoc>;\n\n  /**\n   * Update the metadata of a user.\n   */\n  putUser(username: string, options?: PutUserOptions): Promise<PouchDB.Core.Response>;\n\n  /**\n   * Delete a user.\n   */\n  deleteUser(username: string,\n            options?: PouchDB.Core.Options): Promise<PouchDB.Core.Response>;\n\n  /**\n   * Set new `password` for user `username`.\n   */\n  changePassword(username: string, password: string,\n                options?: PouchDB.Core.Options): Promise<PouchDB.Core.Response>;\n\n  /**\n   * Renames `oldUsername` to `newUsername`.\n   */\n  changeUsername(oldUsername: string, newUsername: string,\n                options?: PouchDB.Core.Options): Promise<PouchDB.Core.Response>;\n\n  /**\n   * Sign up a new admin.\n   */\n  signUpAdmin(username: string, password: string,\n              options?: PutUserOptions): Promise<string>;\n\n  /**\n   * Delete an admin.\n   */\n  deleteAdmin(username: string, options?: PouchDB.Core.Options): Promise<string>;\n}\n\ntype PouchDatabase = Database<any>;\n\ninterface PDB extends PouchDatabase {\n  __opts:PDBOpts;\n  prefix?:string;\n  type():string;\n}\n\nconst getBaseUrl:Function = function(db:PDB):string {\n  // Use PouchDB.defaults' prefix, if any\n  let fullName:string;\n  if(db && db.prefix) {\n    let prefix:string = db.prefix;\n    fullName = prefix + (prefix.endsWith('/') ? '' : '/') + db.name;\n  } else {\n    fullName = db.name;\n  }\n\n  let uri:any = parseUri(fullName);\n\n  // Compute parent path for databases not hosted on domain root (see #215)\n  let path:string = uri.path;\n  let normalizedPath:string = path.endsWith('/') ? path.substr(0, -1) : path;\n  let parentPath:string = normalizedPath.split('/').slice(0, -1).join('/');\n\n  return uri.protocol + '://' +\n      uri.host +\n      (uri.port ? ':' + uri.port : '') +\n      parentPath;\n}\n\nfunction getBasicAuthHeaders(db:PDB):Headers {\n  let auth:AuthHeader;\n  if(db.__opts && db.__opts.auth) {\n    auth = db.__opts.auth;\n  } else {\n    let uri:any = parseUri(db.name);\n    if(uri.user || uri.password) {\n      auth = {\n        username: uri.user,\n        password: uri.password,\n      };\n    }\n  }\n\n  if(!auth) {\n    return new Headers();\n  }\n\n  let str:string = auth.username + ':' + auth.password;\n  let token:string = btoa(decodeURIComponent(encodeURIComponent(str)));\n\n  let headers:Headers = new Headers();\n  headers.set('Authorization', 'Basic ' + token);\n\n  return headers;\n}\n\nasync function doFetch(db:PDB, url:string, opts:any):Promise<any> {\n  try {\n    opts = assign(opts || {});\n    let newurl:string = url;\n    // if(url[0] === '/') {\n    //   newurl = \"..\" + url;\n    // }\n    \n    if (opts.body && typeof opts.body !== 'string') {\n      opts.body = JSON.stringify(opts.body);\n    }\n  \n    let res:Response = await db.fetch(newurl, opts);\n    let ok:boolean = res.ok;\n    let content:any = await res.json();\n    // if(ok) {\n    //   callback(null, content);\n    // } else {\n    //   content.name = content.error;\n    //   callback(content);\n    // }\n    // return res;\n    if(ok) {\n      return content;\n    } else {\n      let err:Error = new Error('fetch result not ok');\n      throw err;\n    }\n  } catch(err) {\n    if(err && err.name === 'unknown_error') {\n      err.message = (err.message + ' ' || '') +\n          'Unknown error!  Did you remember to enable CORS?';\n    }\n    // callback(err);\n    throw err;\n  }\n}\n\nclass AuthError extends Error {\n  public status:number = 400;\n  public name:string = \"authentication_error\";\n  public message:string = \"\";\n  public error:boolean = true;\n  public taken:boolean = false;\n  constructor(msg?:string) {\n    super(msg);\n    if(msg) {\n      this.message = msg;\n    }\n    Error.captureStackTrace(this);\n    return this;\n  }\n}\n\n// function AuthError(message:string):void {\n//   this.status = 400;\n//   this.name = 'authentication_error';\n//   this.message = message;\n//   this.error = true;\n//   try {\n//     Error.captureStackTrace(this, AuthError);\n//   } catch (e) {}\n// }\n\n// inherits(AuthError, Error);\ntype LoginOptions = PouchDB.Core.Options;\ntype BasicResponse = PouchDB.Core.BasicResponse;\nexport {\n  AuthError,\n  doFetch,\n  getBasicAuthHeaders,\n  getBaseUrl,\n  AuthHeader,\n  PDBOpts,\n  UserContext,\n  User,\n  PDB,\n  PouchDBUserDoc,\n  LoginOptions,\n  LoginResponse,\n  BasicResponse,\n  SessionResponse,\n  PutUserOptions,\n  CouchNodeMembership,\n};\n","function mangle(key) {\n  return '$' + key;\n}\nfunction unmangle(key) {\n  return key.substring(1);\n}\nfunction Map$1() {\n  this._store = {};\n}\nMap$1.prototype.get = function (key) {\n  var mangled = mangle(key);\n  return this._store[mangled];\n};\nMap$1.prototype.set = function (key, value) {\n  var mangled = mangle(key);\n  this._store[mangled] = value;\n  return true;\n};\nMap$1.prototype.has = function (key) {\n  var mangled = mangle(key);\n  return mangled in this._store;\n};\nMap$1.prototype.delete = function (key) {\n  var mangled = mangle(key);\n  var res = mangled in this._store;\n  delete this._store[mangled];\n  return res;\n};\nMap$1.prototype.forEach = function (cb) {\n  var keys = Object.keys(this._store);\n  for (var i = 0, len = keys.length; i < len; i++) {\n    var key = keys[i];\n    var value = this._store[key];\n    key = unmangle(key);\n    cb(value, key);\n  }\n};\nObject.defineProperty(Map$1.prototype, 'size', {\n  get: function () {\n    return Object.keys(this._store).length;\n  }\n});\n\nfunction Set$1(array) {\n  this._store = new Map$1();\n\n  // init with an array\n  if (array && Array.isArray(array)) {\n    for (var i = 0, len = array.length; i < len; i++) {\n      this.add(array[i]);\n    }\n  }\n}\nSet$1.prototype.add = function (key) {\n  return this._store.set(key, true);\n};\nSet$1.prototype.has = function (key) {\n  return this._store.has(key);\n};\nSet$1.prototype.forEach = function (cb) {\n  this._store.forEach(function (value, key) {\n    cb(key);\n  });\n};\nObject.defineProperty(Set$1.prototype, 'size', {\n  get: function () {\n    return this._store.size;\n  }\n});\n\n/* global Map,Set,Symbol */\n// Based on https://kangax.github.io/compat-table/es6/ we can sniff out\n// incomplete Map/Set implementations which would otherwise cause our tests to fail.\n// Notably they fail in IE11 and iOS 8.4, which this prevents.\nfunction supportsMapAndSet() {\n  if (typeof Symbol === 'undefined' || typeof Map === 'undefined' || typeof Set === 'undefined') {\n    return false;\n  }\n  var prop = Object.getOwnPropertyDescriptor(Map, Symbol.species);\n  return prop && 'get' in prop && Map[Symbol.species] === Map;\n}\n\n// based on https://github.com/montagejs/collections\n\nvar ExportedSet;\nvar ExportedMap;\n\n{\n  if (supportsMapAndSet()) { // prefer built-in Map/Set\n    ExportedSet = Set;\n    ExportedMap = Map;\n  } else { // fall back to our polyfill\n    ExportedSet = Set$1;\n    ExportedMap = Map$1;\n  }\n}\n\nexport { ExportedSet as Set, ExportedMap as Map };\n","import inherits from 'inherits';\n\ninherits(PouchError, Error);\n\nfunction PouchError(status, error, reason) {\n  Error.call(this, reason);\n  this.status = status;\n  this.name = error;\n  this.message = reason;\n  this.error = true;\n}\n\nPouchError.prototype.toString = function () {\n  return JSON.stringify({\n    status: this.status,\n    name: this.name,\n    message: this.message,\n    reason: this.reason\n  });\n};\n\nvar UNAUTHORIZED = new PouchError(401, 'unauthorized', \"Name or password is incorrect.\");\nvar MISSING_BULK_DOCS = new PouchError(400, 'bad_request', \"Missing JSON list of 'docs'\");\nvar MISSING_DOC = new PouchError(404, 'not_found', 'missing');\nvar REV_CONFLICT = new PouchError(409, 'conflict', 'Document update conflict');\nvar INVALID_ID = new PouchError(400, 'bad_request', '_id field must contain a string');\nvar MISSING_ID = new PouchError(412, 'missing_id', '_id is required for puts');\nvar RESERVED_ID = new PouchError(400, 'bad_request', 'Only reserved document ids may start with underscore.');\nvar NOT_OPEN = new PouchError(412, 'precondition_failed', 'Database not open');\nvar UNKNOWN_ERROR = new PouchError(500, 'unknown_error', 'Database encountered an unknown error');\nvar BAD_ARG = new PouchError(500, 'badarg', 'Some query argument is invalid');\nvar INVALID_REQUEST = new PouchError(400, 'invalid_request', 'Request was invalid');\nvar QUERY_PARSE_ERROR = new PouchError(400, 'query_parse_error', 'Some query parameter is invalid');\nvar DOC_VALIDATION = new PouchError(500, 'doc_validation', 'Bad special document member');\nvar BAD_REQUEST = new PouchError(400, 'bad_request', 'Something wrong with the request');\nvar NOT_AN_OBJECT = new PouchError(400, 'bad_request', 'Document must be a JSON object');\nvar DB_MISSING = new PouchError(404, 'not_found', 'Database not found');\nvar IDB_ERROR = new PouchError(500, 'indexed_db_went_bad', 'unknown');\nvar WSQ_ERROR = new PouchError(500, 'web_sql_went_bad', 'unknown');\nvar LDB_ERROR = new PouchError(500, 'levelDB_went_went_bad', 'unknown');\nvar FORBIDDEN = new PouchError(403, 'forbidden', 'Forbidden by design doc validate_doc_update function');\nvar INVALID_REV = new PouchError(400, 'bad_request', 'Invalid rev format');\nvar FILE_EXISTS = new PouchError(412, 'file_exists', 'The database could not be created, the file already exists.');\nvar MISSING_STUB = new PouchError(412, 'missing_stub', 'A pre-existing attachment stub wasn\\'t found');\nvar INVALID_URL = new PouchError(413, 'invalid_url', 'Provided URL is invalid');\n\nfunction createError(error, reason) {\n  function CustomPouchError(reason) {\n    // inherit error properties from our parent error manually\n    // so as to allow proper JSON parsing.\n    /* jshint ignore:start */\n    for (var p in error) {\n      if (typeof error[p] !== 'function') {\n        this[p] = error[p];\n      }\n    }\n    /* jshint ignore:end */\n    if (reason !== undefined) {\n      this.reason = reason;\n    }\n  }\n  CustomPouchError.prototype = PouchError.prototype;\n  return new CustomPouchError(reason);\n}\n\nfunction generateErrorFromResponse(err) {\n\n  if (typeof err !== 'object') {\n    var data = err;\n    err = UNKNOWN_ERROR;\n    err.data = data;\n  }\n\n  if ('error' in err && err.error === 'conflict') {\n    err.name = 'conflict';\n    err.status = 409;\n  }\n\n  if (!('name' in err)) {\n    err.name = err.error || 'unknown';\n  }\n\n  if (!('status' in err)) {\n    err.status = 500;\n  }\n\n  if (!('message' in err)) {\n    err.message = err.message || err.reason;\n  }\n\n  return err;\n}\n\nexport { UNAUTHORIZED, MISSING_BULK_DOCS, MISSING_DOC, REV_CONFLICT, INVALID_ID, MISSING_ID, RESERVED_ID, NOT_OPEN, UNKNOWN_ERROR, BAD_ARG, INVALID_REQUEST, QUERY_PARSE_ERROR, DOC_VALIDATION, BAD_REQUEST, NOT_AN_OBJECT, DB_MISSING, WSQ_ERROR, LDB_ERROR, FORBIDDEN, INVALID_REV, FILE_EXISTS, MISSING_STUB, IDB_ERROR, INVALID_URL, createError, generateErrorFromResponse };\n","import getArguments from 'argsarray';\nimport { Map } from 'pouchdb-collections';\nimport immediate from 'immediate';\nimport { EventEmitter } from 'events';\nimport inherits from 'inherits';\nimport { createError, BAD_REQUEST, INVALID_ID, MISSING_ID, RESERVED_ID } from 'pouchdb-errors';\nimport uuidV4 from 'uuid';\nimport { stringMd5 } from 'pouchdb-md5';\nimport { clone } from 'pouchdb-utils';\n\nfunction isBinaryObject(object) {\n  return (typeof ArrayBuffer !== 'undefined' && object instanceof ArrayBuffer) ||\n    (typeof Blob !== 'undefined' && object instanceof Blob);\n}\n\nfunction cloneArrayBuffer(buff) {\n  if (typeof buff.slice === 'function') {\n    return buff.slice(0);\n  }\n  // IE10-11 slice() polyfill\n  var target = new ArrayBuffer(buff.byteLength);\n  var targetArray = new Uint8Array(target);\n  var sourceArray = new Uint8Array(buff);\n  targetArray.set(sourceArray);\n  return target;\n}\n\nfunction cloneBinaryObject(object) {\n  if (object instanceof ArrayBuffer) {\n    return cloneArrayBuffer(object);\n  }\n  var size = object.size;\n  var type = object.type;\n  // Blob\n  if (typeof object.slice === 'function') {\n    return object.slice(0, size, type);\n  }\n  // PhantomJS slice() replacement\n  return object.webkitSlice(0, size, type);\n}\n\n// most of this is borrowed from lodash.isPlainObject:\n// https://github.com/fis-components/lodash.isplainobject/\n// blob/29c358140a74f252aeb08c9eb28bef86f2217d4a/index.js\n\nvar funcToString = Function.prototype.toString;\nvar objectCtorString = funcToString.call(Object);\n\nfunction isPlainObject(value) {\n  var proto = Object.getPrototypeOf(value);\n  /* istanbul ignore if */\n  if (proto === null) { // not sure when this happens, but I guess it can\n    return true;\n  }\n  var Ctor = proto.constructor;\n  return (typeof Ctor == 'function' &&\n    Ctor instanceof Ctor && funcToString.call(Ctor) == objectCtorString);\n}\n\nfunction clone$1(object) {\n  var newObject;\n  var i;\n  var len;\n\n  if (!object || typeof object !== 'object') {\n    return object;\n  }\n\n  if (Array.isArray(object)) {\n    newObject = [];\n    for (i = 0, len = object.length; i < len; i++) {\n      newObject[i] = clone$1(object[i]);\n    }\n    return newObject;\n  }\n\n  // special case: to avoid inconsistencies between IndexedDB\n  // and other backends, we automatically stringify Dates\n  if (object instanceof Date) {\n    return object.toISOString();\n  }\n\n  if (isBinaryObject(object)) {\n    return cloneBinaryObject(object);\n  }\n\n  if (!isPlainObject(object)) {\n    return object; // don't clone objects like Workers\n  }\n\n  newObject = {};\n  for (i in object) {\n    /* istanbul ignore else */\n    if (Object.prototype.hasOwnProperty.call(object, i)) {\n      var value = clone$1(object[i]);\n      if (typeof value !== 'undefined') {\n        newObject[i] = value;\n      }\n    }\n  }\n  return newObject;\n}\n\nfunction once(fun) {\n  var called = false;\n  return getArguments(function (args) {\n    /* istanbul ignore if */\n    if (called) {\n      // this is a smoke test and should never actually happen\n      throw new Error('once called more than once');\n    } else {\n      called = true;\n      fun.apply(this, args);\n    }\n  });\n}\n\nfunction toPromise(func) {\n  //create the function we will be returning\n  return getArguments(function (args) {\n    // Clone arguments\n    args = clone$1(args);\n    var self = this;\n    // if the last argument is a function, assume its a callback\n    var usedCB = (typeof args[args.length - 1] === 'function') ? args.pop() : false;\n    var promise = new Promise(function (fulfill, reject) {\n      var resp;\n      try {\n        var callback = once(function (err, mesg) {\n          if (err) {\n            reject(err);\n          } else {\n            fulfill(mesg);\n          }\n        });\n        // create a callback for this invocation\n        // apply the function in the orig context\n        args.push(callback);\n        resp = func.apply(self, args);\n        if (resp && typeof resp.then === 'function') {\n          fulfill(resp);\n        }\n      } catch (e) {\n        reject(e);\n      }\n    });\n    // if there is a callback, call it back\n    if (usedCB) {\n      promise.then(function (result) {\n        usedCB(null, result);\n      }, usedCB);\n    }\n    return promise;\n  });\n}\n\nfunction logApiCall(self, name, args) {\n  /* istanbul ignore if */\n  if (self.constructor.listeners('debug').length) {\n    var logArgs = ['api', self.name, name];\n    for (var i = 0; i < args.length - 1; i++) {\n      logArgs.push(args[i]);\n    }\n    self.constructor.emit('debug', logArgs);\n\n    // override the callback itself to log the response\n    var origCallback = args[args.length - 1];\n    args[args.length - 1] = function (err, res) {\n      var responseArgs = ['api', self.name, name];\n      responseArgs = responseArgs.concat(\n        err ? ['error', err] : ['success', res]\n      );\n      self.constructor.emit('debug', responseArgs);\n      origCallback(err, res);\n    };\n  }\n}\n\nfunction adapterFun(name, callback) {\n  return toPromise(getArguments(function (args) {\n    if (this._closed) {\n      return Promise.reject(new Error('database is closed'));\n    }\n    if (this._destroyed) {\n      return Promise.reject(new Error('database is destroyed'));\n    }\n    var self = this;\n    logApiCall(self, name, args);\n    if (!this.taskqueue.isReady) {\n      return new Promise(function (fulfill, reject) {\n        self.taskqueue.addTask(function (failed) {\n          if (failed) {\n            reject(failed);\n          } else {\n            fulfill(self[name].apply(self, args));\n          }\n        });\n      });\n    }\n    return callback.apply(this, args);\n  }));\n}\n\n// like underscore/lodash _.pick()\nfunction pick(obj, arr) {\n  var res = {};\n  for (var i = 0, len = arr.length; i < len; i++) {\n    var prop = arr[i];\n    if (prop in obj) {\n      res[prop] = obj[prop];\n    }\n  }\n  return res;\n}\n\n// Most browsers throttle concurrent requests at 6, so it's silly\n// to shim _bulk_get by trying to launch potentially hundreds of requests\n// and then letting the majority time out. We can handle this ourselves.\nvar MAX_NUM_CONCURRENT_REQUESTS = 6;\n\nfunction identityFunction(x) {\n  return x;\n}\n\nfunction formatResultForOpenRevsGet(result) {\n  return [{\n    ok: result\n  }];\n}\n\n// shim for P/CouchDB adapters that don't directly implement _bulk_get\nfunction bulkGet(db, opts, callback) {\n  var requests = opts.docs;\n\n  // consolidate into one request per doc if possible\n  var requestsById = new Map();\n  requests.forEach(function (request) {\n    if (requestsById.has(request.id)) {\n      requestsById.get(request.id).push(request);\n    } else {\n      requestsById.set(request.id, [request]);\n    }\n  });\n\n  var numDocs = requestsById.size;\n  var numDone = 0;\n  var perDocResults = new Array(numDocs);\n\n  function collapseResultsAndFinish() {\n    var results = [];\n    perDocResults.forEach(function (res) {\n      res.docs.forEach(function (info) {\n        results.push({\n          id: res.id,\n          docs: [info]\n        });\n      });\n    });\n    callback(null, {results: results});\n  }\n\n  function checkDone() {\n    if (++numDone === numDocs) {\n      collapseResultsAndFinish();\n    }\n  }\n\n  function gotResult(docIndex, id, docs) {\n    perDocResults[docIndex] = {id: id, docs: docs};\n    checkDone();\n  }\n\n  var allRequests = [];\n  requestsById.forEach(function (value, key) {\n    allRequests.push(key);\n  });\n\n  var i = 0;\n\n  function nextBatch() {\n\n    if (i >= allRequests.length) {\n      return;\n    }\n\n    var upTo = Math.min(i + MAX_NUM_CONCURRENT_REQUESTS, allRequests.length);\n    var batch = allRequests.slice(i, upTo);\n    processBatch(batch, i);\n    i += batch.length;\n  }\n\n  function processBatch(batch, offset) {\n    batch.forEach(function (docId, j) {\n      var docIdx = offset + j;\n      var docRequests = requestsById.get(docId);\n\n      // just use the first request as the \"template\"\n      // TODO: The _bulk_get API allows for more subtle use cases than this,\n      // but for now it is unlikely that there will be a mix of different\n      // \"atts_since\" or \"attachments\" in the same request, since it's just\n      // replicate.js that is using this for the moment.\n      // Also, atts_since is aspirational, since we don't support it yet.\n      var docOpts = pick(docRequests[0], ['atts_since', 'attachments']);\n      docOpts.open_revs = docRequests.map(function (request) {\n        // rev is optional, open_revs disallowed\n        return request.rev;\n      });\n\n      // remove falsey / undefined revisions\n      docOpts.open_revs = docOpts.open_revs.filter(identityFunction);\n\n      var formatResult = identityFunction;\n\n      if (docOpts.open_revs.length === 0) {\n        delete docOpts.open_revs;\n\n        // when fetching only the \"winning\" leaf,\n        // transform the result so it looks like an open_revs\n        // request\n        formatResult = formatResultForOpenRevsGet;\n      }\n\n      // globally-supplied options\n      ['revs', 'attachments', 'binary', 'ajax', 'latest'].forEach(function (param) {\n        if (param in opts) {\n          docOpts[param] = opts[param];\n        }\n      });\n      db.get(docId, docOpts, function (err, res) {\n        var result;\n        /* istanbul ignore if */\n        if (err) {\n          result = [{error: err}];\n        } else {\n          result = formatResult(res);\n        }\n        gotResult(docIdx, docId, result);\n        nextBatch();\n      });\n    });\n  }\n\n  nextBatch();\n\n}\n\nvar hasLocal;\n\ntry {\n  localStorage.setItem('_pouch_check_localstorage', 1);\n  hasLocal = !!localStorage.getItem('_pouch_check_localstorage');\n} catch (e) {\n  hasLocal = false;\n}\n\nfunction hasLocalStorage() {\n  return hasLocal;\n}\n\n// Custom nextTick() shim for browsers. In node, this will just be process.nextTick(). We\n\ninherits(Changes, EventEmitter);\n\n/* istanbul ignore next */\nfunction attachBrowserEvents(self) {\n  if (hasLocalStorage()) {\n    addEventListener(\"storage\", function (e) {\n      self.emit(e.key);\n    });\n  }\n}\n\nfunction Changes() {\n  EventEmitter.call(this);\n  this._listeners = {};\n\n  attachBrowserEvents(this);\n}\nChanges.prototype.addListener = function (dbName, id, db, opts) {\n  /* istanbul ignore if */\n  if (this._listeners[id]) {\n    return;\n  }\n  var self = this;\n  var inprogress = false;\n  function eventFunction() {\n    /* istanbul ignore if */\n    if (!self._listeners[id]) {\n      return;\n    }\n    if (inprogress) {\n      inprogress = 'waiting';\n      return;\n    }\n    inprogress = true;\n    var changesOpts = pick(opts, [\n      'style', 'include_docs', 'attachments', 'conflicts', 'filter',\n      'doc_ids', 'view', 'since', 'query_params', 'binary', 'return_docs'\n    ]);\n\n    /* istanbul ignore next */\n    function onError() {\n      inprogress = false;\n    }\n\n    db.changes(changesOpts).on('change', function (c) {\n      if (c.seq > opts.since && !opts.cancelled) {\n        opts.since = c.seq;\n        opts.onChange(c);\n      }\n    }).on('complete', function () {\n      if (inprogress === 'waiting') {\n        immediate(eventFunction);\n      }\n      inprogress = false;\n    }).on('error', onError);\n  }\n  this._listeners[id] = eventFunction;\n  this.on(dbName, eventFunction);\n};\n\nChanges.prototype.removeListener = function (dbName, id) {\n  /* istanbul ignore if */\n  if (!(id in this._listeners)) {\n    return;\n  }\n  EventEmitter.prototype.removeListener.call(this, dbName,\n    this._listeners[id]);\n  delete this._listeners[id];\n};\n\n\n/* istanbul ignore next */\nChanges.prototype.notifyLocalWindows = function (dbName) {\n  //do a useless change on a storage thing\n  //in order to get other windows's listeners to activate\n  if (hasLocalStorage()) {\n    localStorage[dbName] = (localStorage[dbName] === \"a\") ? \"b\" : \"a\";\n  }\n};\n\nChanges.prototype.notify = function (dbName) {\n  this.emit(dbName);\n  this.notifyLocalWindows(dbName);\n};\n\nfunction guardedConsole(method) {\n  /* istanbul ignore else */\n  if (typeof console !== 'undefined' && typeof console[method] === 'function') {\n    var args = Array.prototype.slice.call(arguments, 1);\n    console[method].apply(console, args);\n  }\n}\n\nfunction randomNumber(min, max) {\n  var maxTimeout = 600000; // Hard-coded default of 10 minutes\n  min = parseInt(min, 10) || 0;\n  max = parseInt(max, 10);\n  if (max !== max || max <= min) {\n    max = (min || 1) << 1; //doubling\n  } else {\n    max = max + 1;\n  }\n  // In order to not exceed maxTimeout, pick a random value between half of maxTimeout and maxTimeout\n  if (max > maxTimeout) {\n    min = maxTimeout >> 1; // divide by two\n    max = maxTimeout;\n  }\n  var ratio = Math.random();\n  var range = max - min;\n\n  return ~~(range * ratio + min); // ~~ coerces to an int, but fast.\n}\n\nfunction defaultBackOff(min) {\n  var max = 0;\n  if (!min) {\n    max = 2000;\n  }\n  return randomNumber(min, max);\n}\n\n// designed to give info to browser users, who are disturbed\n// when they see http errors in the console\nfunction explainError(status, str) {\n  guardedConsole('info', 'The above ' + status + ' is totally normal. ' + str);\n}\n\nvar assign;\n{\n  if (typeof Object.assign === 'function') {\n    assign = Object.assign;\n  } else {\n    // lite Object.assign polyfill based on\n    // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign\n    assign = function (target) {\n      var to = Object(target);\n\n      for (var index = 1; index < arguments.length; index++) {\n        var nextSource = arguments[index];\n\n        if (nextSource != null) { // Skip over if undefined or null\n          for (var nextKey in nextSource) {\n            // Avoid bugs when hasOwnProperty is shadowed\n            if (Object.prototype.hasOwnProperty.call(nextSource, nextKey)) {\n              to[nextKey] = nextSource[nextKey];\n            }\n          }\n        }\n      }\n      return to;\n    };\n  }\n}\n\nvar assign$1 = assign;\n\nfunction tryFilter(filter, doc, req) {\n  try {\n    return !filter(doc, req);\n  } catch (err) {\n    var msg = 'Filter function threw: ' + err.toString();\n    return createError(BAD_REQUEST, msg);\n  }\n}\n\nfunction filterChange(opts) {\n  var req = {};\n  var hasFilter = opts.filter && typeof opts.filter === 'function';\n  req.query = opts.query_params;\n\n  return function filter(change) {\n    if (!change.doc) {\n      // CSG sends events on the changes feed that don't have documents,\n      // this hack makes a whole lot of existing code robust.\n      change.doc = {};\n    }\n\n    var filterReturn = hasFilter && tryFilter(opts.filter, change.doc, req);\n\n    if (typeof filterReturn === 'object') {\n      return filterReturn;\n    }\n\n    if (filterReturn) {\n      return false;\n    }\n\n    if (!opts.include_docs) {\n      delete change.doc;\n    } else if (!opts.attachments) {\n      for (var att in change.doc._attachments) {\n        /* istanbul ignore else */\n        if (change.doc._attachments.hasOwnProperty(att)) {\n          change.doc._attachments[att].stub = true;\n        }\n      }\n    }\n    return true;\n  };\n}\n\nfunction flatten(arrs) {\n  var res = [];\n  for (var i = 0, len = arrs.length; i < len; i++) {\n    res = res.concat(arrs[i]);\n  }\n  return res;\n}\n\n// shim for Function.prototype.name,\n// for browsers that don't support it like IE\n\n/* istanbul ignore next */\nfunction f() {}\n\nvar hasName = f.name;\nvar res;\n\n// We dont run coverage in IE\n/* istanbul ignore else */\nif (hasName) {\n  res = function (fun) {\n    return fun.name;\n  };\n} else {\n  res = function (fun) {\n    var match = fun.toString().match(/^\\s*function\\s*(?:(\\S+)\\s*)?\\(/);\n    if (match && match[1]) {\n      return match[1];\n    }\n    else {\n      return '';\n    }\n  };\n}\n\nvar res$1 = res;\n\n// Determine id an ID is valid\n//   - invalid IDs begin with an underescore that does not begin '_design' or\n//     '_local'\n//   - any other string value is a valid id\n// Returns the specific error object for each case\nfunction invalidIdError(id) {\n  var err;\n  if (!id) {\n    err = createError(MISSING_ID);\n  } else if (typeof id !== 'string') {\n    err = createError(INVALID_ID);\n  } else if (/^_/.test(id) && !(/^_(design|local)/).test(id)) {\n    err = createError(RESERVED_ID);\n  }\n  if (err) {\n    throw err;\n  }\n}\n\n// Checks if a PouchDB object is \"remote\" or not. This is\n\nfunction isRemote(db) {\n  if (typeof db._remote === 'boolean') {\n    return db._remote;\n  }\n  /* istanbul ignore next */\n  if (typeof db.type === 'function') {\n    guardedConsole('warn',\n      'db.type() is deprecated and will be removed in ' +\n      'a future version of PouchDB');\n    return db.type() === 'http';\n  }\n  /* istanbul ignore next */\n  return false;\n}\n\nfunction listenerCount(ee, type) {\n  return 'listenerCount' in ee ? ee.listenerCount(type) :\n                                 EventEmitter.listenerCount(ee, type);\n}\n\nfunction parseDesignDocFunctionName(s) {\n  if (!s) {\n    return null;\n  }\n  var parts = s.split('/');\n  if (parts.length === 2) {\n    return parts;\n  }\n  if (parts.length === 1) {\n    return [s, s];\n  }\n  return null;\n}\n\nfunction normalizeDesignDocFunctionName(s) {\n  var normalized = parseDesignDocFunctionName(s);\n  return normalized ? normalized.join('/') : null;\n}\n\n// originally parseUri 1.2.2, now patched by us\n// (c) Steven Levithan <stevenlevithan.com>\n// MIT License\nvar keys = [\"source\", \"protocol\", \"authority\", \"userInfo\", \"user\", \"password\",\n    \"host\", \"port\", \"relative\", \"path\", \"directory\", \"file\", \"query\", \"anchor\"];\nvar qName =\"queryKey\";\nvar qParser = /(?:^|&)([^&=]*)=?([^&]*)/g;\n\n// use the \"loose\" parser\n/* eslint maxlen: 0, no-useless-escape: 0 */\nvar parser = /^(?:(?![^:@]+:[^:@\\/]*@)([^:\\/?#.]+):)?(?:\\/\\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\\/?#]*)(?::(\\d*))?)(((\\/(?:[^?#](?![^?#\\/]*\\.[^?#\\/.]+(?:[?#]|$)))*\\/?)?([^?#\\/]*))(?:\\?([^#]*))?(?:#(.*))?)/;\n\nfunction parseUri(str) {\n  var m = parser.exec(str);\n  var uri = {};\n  var i = 14;\n\n  while (i--) {\n    var key = keys[i];\n    var value = m[i] || \"\";\n    var encoded = ['user', 'password'].indexOf(key) !== -1;\n    uri[key] = encoded ? decodeURIComponent(value) : value;\n  }\n\n  uri[qName] = {};\n  uri[keys[12]].replace(qParser, function ($0, $1, $2) {\n    if ($1) {\n      uri[qName][$1] = $2;\n    }\n  });\n\n  return uri;\n}\n\n// Based on https://github.com/alexdavid/scope-eval v0.0.3\n// (source: https://unpkg.com/scope-eval@0.0.3/scope_eval.js)\n// This is basically just a wrapper around new Function()\n\nfunction scopeEval(source, scope) {\n  var keys = [];\n  var values = [];\n  for (var key in scope) {\n    if (scope.hasOwnProperty(key)) {\n      keys.push(key);\n      values.push(scope[key]);\n    }\n  }\n  keys.push(source);\n  return Function.apply(null, keys).apply(null, values);\n}\n\n// this is essentially the \"update sugar\" function from daleharvey/pouchdb#1388\n// the diffFun tells us what delta to apply to the doc.  it either returns\n// the doc, or false if it doesn't need to do an update after all\nfunction upsert(db, docId, diffFun) {\n  return new Promise(function (fulfill, reject) {\n    db.get(docId, function (err, doc) {\n      if (err) {\n        /* istanbul ignore next */\n        if (err.status !== 404) {\n          return reject(err);\n        }\n        doc = {};\n      }\n\n      // the user might change the _rev, so save it for posterity\n      var docRev = doc._rev;\n      var newDoc = diffFun(doc);\n\n      if (!newDoc) {\n        // if the diffFun returns falsy, we short-circuit as\n        // an optimization\n        return fulfill({updated: false, rev: docRev});\n      }\n\n      // users aren't allowed to modify these values,\n      // so reset them here\n      newDoc._id = docId;\n      newDoc._rev = docRev;\n      fulfill(tryAndPut(db, newDoc, diffFun));\n    });\n  });\n}\n\nfunction tryAndPut(db, doc, diffFun) {\n  return db.put(doc).then(function (res) {\n    return {\n      updated: true,\n      rev: res.rev\n    };\n  }, function (err) {\n    /* istanbul ignore next */\n    if (err.status !== 409) {\n      throw err;\n    }\n    return upsert(db, doc._id, diffFun);\n  });\n}\n\nfunction rev(doc, deterministic_revs) {\n  var clonedDoc = clone(doc);\n  if (!deterministic_revs) {\n    return uuidV4.v4().replace(/-/g, '').toLowerCase();\n  }\n\n  delete clonedDoc._rev_tree;\n  return stringMd5(JSON.stringify(clonedDoc));\n}\n\nvar uuid = uuidV4.v4;\n\nexport { adapterFun, assign$1 as assign, bulkGet as bulkGetShim, Changes as changesHandler, clone$1 as clone, defaultBackOff, explainError, filterChange, flatten, res$1 as functionName, guardedConsole, hasLocalStorage, invalidIdError, isRemote, listenerCount, immediate as nextTick, normalizeDesignDocFunctionName as normalizeDdocFunctionName, once, parseDesignDocFunctionName as parseDdocFunctionName, parseUri, pick, rev, scopeEval, toPromise, upsert, uuid };\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var thisAtob = function (str) {\n  return atob(str);\n};\n\nvar thisBtoa = function (str) {\n  return btoa(str);\n};\n\n// Abstracts constructing a Blob object, so it also works in older\n// browsers that don't support the native Blob constructor (e.g.\n// old QtWebKit versions, Android < 4.4).\nfunction createBlob(parts, properties) {\n  /* global BlobBuilder,MSBlobBuilder,MozBlobBuilder,WebKitBlobBuilder */\n  parts = parts || [];\n  properties = properties || {};\n  try {\n    return new Blob(parts, properties);\n  } catch (e) {\n    if (e.name !== \"TypeError\") {\n      throw e;\n    }\n    var Builder = typeof BlobBuilder !== 'undefined' ? BlobBuilder :\n                  typeof MSBlobBuilder !== 'undefined' ? MSBlobBuilder :\n                  typeof MozBlobBuilder !== 'undefined' ? MozBlobBuilder :\n                  WebKitBlobBuilder;\n    var builder = new Builder();\n    for (var i = 0; i < parts.length; i += 1) {\n      builder.append(parts[i]);\n    }\n    return builder.getBlob(properties.type);\n  }\n}\n\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction binaryStringToArrayBuffer(bin) {\n  var length = bin.length;\n  var buf = new ArrayBuffer(length);\n  var arr = new Uint8Array(buf);\n  for (var i = 0; i < length; i++) {\n    arr[i] = bin.charCodeAt(i);\n  }\n  return buf;\n}\n\nfunction binStringToBluffer(binString, type) {\n  return createBlob([binaryStringToArrayBuffer(binString)], {type: type});\n}\n\nfunction b64ToBluffer(b64, type) {\n  return binStringToBluffer(thisAtob(b64), type);\n}\n\n//Can't find original post, but this is close\n//http://stackoverflow.com/questions/6965107/ (continues on next line)\n//converting-between-strings-and-arraybuffers\nfunction arrayBufferToBinaryString(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n  var length = bytes.byteLength;\n  for (var i = 0; i < length; i++) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return binary;\n}\n\n// shim for browsers that don't support it\nfunction readAsBinaryString(blob, callback) {\n  var reader = new FileReader();\n  var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n  reader.onloadend = function (e) {\n    var result = e.target.result || '';\n    if (hasBinaryString) {\n      return callback(result);\n    }\n    callback(arrayBufferToBinaryString(result));\n  };\n  if (hasBinaryString) {\n    reader.readAsBinaryString(blob);\n  } else {\n    reader.readAsArrayBuffer(blob);\n  }\n}\n\nfunction blobToBinaryString(blobOrBuffer, callback) {\n  readAsBinaryString(blobOrBuffer, function (bin) {\n    callback(bin);\n  });\n}\n\nfunction blobToBase64(blobOrBuffer, callback) {\n  blobToBinaryString(blobOrBuffer, function (base64) {\n    callback(thisBtoa(base64));\n  });\n}\n\n// simplified API. universal browser support is assumed\nfunction readAsArrayBuffer(blob, callback) {\n  var reader = new FileReader();\n  reader.onloadend = function (e) {\n    var result = e.target.result || new ArrayBuffer(0);\n    callback(result);\n  };\n  reader.readAsArrayBuffer(blob);\n}\n\n// this is not used in the browser\nfunction typedBuffer() {\n}\n\nexport { thisAtob as atob, thisBtoa as btoa, b64ToBluffer as base64StringToBlobOrBuffer, binaryStringToArrayBuffer, binStringToBluffer as binaryStringToBlobOrBuffer, createBlob as blob, blobToBase64 as blobOrBufferToBase64, blobToBinaryString as blobOrBufferToBinaryString, readAsArrayBuffer, readAsBinaryString, typedBuffer };\n","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n","'use strict';\n\nmodule.exports = argsArray;\n\nfunction argsArray(fun) {\n  return function () {\n    var len = arguments.length;\n    if (len) {\n      var args = [];\n      var i = -1;\n      while (++i < len) {\n        args[i] = arguments[i];\n      }\n      return fun.call(this, args);\n    } else {\n      return fun.call(this, []);\n    }\n  };\n}","(function (factory) {\n    if (typeof exports === 'object') {\n        // Node/CommonJS\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD\n        define(factory);\n    } else {\n        // Browser globals (with support for web workers)\n        var glob;\n\n        try {\n            glob = window;\n        } catch (e) {\n            glob = self;\n        }\n\n        glob.SparkMD5 = factory();\n    }\n}(function (undefined) {\n\n    'use strict';\n\n    /*\n     * Fastest md5 implementation around (JKM md5).\n     * Credits: Joseph Myers\n     *\n     * @see http://www.myersdaily.org/joseph/javascript/md5-text.html\n     * @see http://jsperf.com/md5-shootout/7\n     */\n\n    /* this function is much faster,\n      so if possible we use it. Some IEs\n      are the only ones I know of that\n      need the idiotic second function,\n      generated by an if clause.  */\n    var add32 = function (a, b) {\n        return (a + b) & 0xFFFFFFFF;\n    },\n        hex_chr = ['0', '1', '2', '3', '4', '5', '6', '7', '8', '9', 'a', 'b', 'c', 'd', 'e', 'f'];\n\n\n    function cmn(q, a, b, x, s, t) {\n        a = add32(add32(a, q), add32(x, t));\n        return add32((a << s) | (a >>> (32 - s)), b);\n    }\n\n    function md5cycle(x, k) {\n        var a = x[0],\n            b = x[1],\n            c = x[2],\n            d = x[3];\n\n        a += (b & c | ~b & d) + k[0] - 680876936 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[1] - 389564586 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[2] + 606105819 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[3] - 1044525330 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[4] - 176418897 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[5] + 1200080426 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[6] - 1473231341 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[7] - 45705983 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[8] + 1770035416 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[9] - 1958414417 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[10] - 42063 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[11] - 1990404162 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n        a += (b & c | ~b & d) + k[12] + 1804603682 | 0;\n        a  = (a << 7 | a >>> 25) + b | 0;\n        d += (a & b | ~a & c) + k[13] - 40341101 | 0;\n        d  = (d << 12 | d >>> 20) + a | 0;\n        c += (d & a | ~d & b) + k[14] - 1502002290 | 0;\n        c  = (c << 17 | c >>> 15) + d | 0;\n        b += (c & d | ~c & a) + k[15] + 1236535329 | 0;\n        b  = (b << 22 | b >>> 10) + c | 0;\n\n        a += (b & d | c & ~d) + k[1] - 165796510 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[6] - 1069501632 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[11] + 643717713 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[0] - 373897302 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[5] - 701558691 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[10] + 38016083 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[15] - 660478335 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[4] - 405537848 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[9] + 568446438 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[14] - 1019803690 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[3] - 187363961 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[8] + 1163531501 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n        a += (b & d | c & ~d) + k[13] - 1444681467 | 0;\n        a  = (a << 5 | a >>> 27) + b | 0;\n        d += (a & c | b & ~c) + k[2] - 51403784 | 0;\n        d  = (d << 9 | d >>> 23) + a | 0;\n        c += (d & b | a & ~b) + k[7] + 1735328473 | 0;\n        c  = (c << 14 | c >>> 18) + d | 0;\n        b += (c & a | d & ~a) + k[12] - 1926607734 | 0;\n        b  = (b << 20 | b >>> 12) + c | 0;\n\n        a += (b ^ c ^ d) + k[5] - 378558 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[8] - 2022574463 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[11] + 1839030562 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[14] - 35309556 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[1] - 1530992060 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[4] + 1272893353 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[7] - 155497632 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[10] - 1094730640 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[13] + 681279174 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[0] - 358537222 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[3] - 722521979 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[6] + 76029189 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n        a += (b ^ c ^ d) + k[9] - 640364487 | 0;\n        a  = (a << 4 | a >>> 28) + b | 0;\n        d += (a ^ b ^ c) + k[12] - 421815835 | 0;\n        d  = (d << 11 | d >>> 21) + a | 0;\n        c += (d ^ a ^ b) + k[15] + 530742520 | 0;\n        c  = (c << 16 | c >>> 16) + d | 0;\n        b += (c ^ d ^ a) + k[2] - 995338651 | 0;\n        b  = (b << 23 | b >>> 9) + c | 0;\n\n        a += (c ^ (b | ~d)) + k[0] - 198630844 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[7] + 1126891415 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[14] - 1416354905 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[5] - 57434055 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[12] + 1700485571 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[3] - 1894986606 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[10] - 1051523 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[1] - 2054922799 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[8] + 1873313359 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[15] - 30611744 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[6] - 1560198380 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[13] + 1309151649 | 0;\n        b  = (b << 21 |b >>> 11) + c | 0;\n        a += (c ^ (b | ~d)) + k[4] - 145523070 | 0;\n        a  = (a << 6 | a >>> 26) + b | 0;\n        d += (b ^ (a | ~c)) + k[11] - 1120210379 | 0;\n        d  = (d << 10 | d >>> 22) + a | 0;\n        c += (a ^ (d | ~b)) + k[2] + 718787259 | 0;\n        c  = (c << 15 | c >>> 17) + d | 0;\n        b += (d ^ (c | ~a)) + k[9] - 343485551 | 0;\n        b  = (b << 21 | b >>> 11) + c | 0;\n\n        x[0] = a + x[0] | 0;\n        x[1] = b + x[1] | 0;\n        x[2] = c + x[2] | 0;\n        x[3] = d + x[3] | 0;\n    }\n\n    function md5blk(s) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = s.charCodeAt(i) + (s.charCodeAt(i + 1) << 8) + (s.charCodeAt(i + 2) << 16) + (s.charCodeAt(i + 3) << 24);\n        }\n        return md5blks;\n    }\n\n    function md5blk_array(a) {\n        var md5blks = [],\n            i; /* Andy King said do it this way. */\n\n        for (i = 0; i < 64; i += 4) {\n            md5blks[i >> 2] = a[i] + (a[i + 1] << 8) + (a[i + 2] << 16) + (a[i + 3] << 24);\n        }\n        return md5blks;\n    }\n\n    function md51(s) {\n        var n = s.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk(s.substring(i - 64, i)));\n        }\n        s = s.substring(i - 64);\n        length = s.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= s.charCodeAt(i) << ((i % 4) << 3);\n        }\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n        return state;\n    }\n\n    function md51_array(a) {\n        var n = a.length,\n            state = [1732584193, -271733879, -1732584194, 271733878],\n            i,\n            length,\n            tail,\n            tmp,\n            lo,\n            hi;\n\n        for (i = 64; i <= n; i += 64) {\n            md5cycle(state, md5blk_array(a.subarray(i - 64, i)));\n        }\n\n        // Not sure if it is a bug, however IE10 will always produce a sub array of length 1\n        // containing the last element of the parent array if the sub array specified starts\n        // beyond the length of the parent array - weird.\n        // https://connect.microsoft.com/IE/feedback/details/771452/typed-array-subarray-issue\n        a = (i - 64) < n ? a.subarray(i - 64) : new Uint8Array(0);\n\n        length = a.length;\n        tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= a[i] << ((i % 4) << 3);\n        }\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(state, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Beware that the final length might not fit in 32 bits so we take care of that\n        tmp = n * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n\n        md5cycle(state, tail);\n\n        return state;\n    }\n\n    function rhex(n) {\n        var s = '',\n            j;\n        for (j = 0; j < 4; j += 1) {\n            s += hex_chr[(n >> (j * 8 + 4)) & 0x0F] + hex_chr[(n >> (j * 8)) & 0x0F];\n        }\n        return s;\n    }\n\n    function hex(x) {\n        var i;\n        for (i = 0; i < x.length; i += 1) {\n            x[i] = rhex(x[i]);\n        }\n        return x.join('');\n    }\n\n    // In some cases the fast add32 function cannot be used..\n    if (hex(md51('hello')) !== '5d41402abc4b2a76b9719d911017c592') {\n        add32 = function (x, y) {\n            var lsw = (x & 0xFFFF) + (y & 0xFFFF),\n                msw = (x >> 16) + (y >> 16) + (lsw >> 16);\n            return (msw << 16) | (lsw & 0xFFFF);\n        };\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * ArrayBuffer slice polyfill.\n     *\n     * @see https://github.com/ttaubert/node-arraybuffer-slice\n     */\n\n    if (typeof ArrayBuffer !== 'undefined' && !ArrayBuffer.prototype.slice) {\n        (function () {\n            function clamp(val, length) {\n                val = (val | 0) || 0;\n\n                if (val < 0) {\n                    return Math.max(val + length, 0);\n                }\n\n                return Math.min(val, length);\n            }\n\n            ArrayBuffer.prototype.slice = function (from, to) {\n                var length = this.byteLength,\n                    begin = clamp(from, length),\n                    end = length,\n                    num,\n                    target,\n                    targetArray,\n                    sourceArray;\n\n                if (to !== undefined) {\n                    end = clamp(to, length);\n                }\n\n                if (begin > end) {\n                    return new ArrayBuffer(0);\n                }\n\n                num = end - begin;\n                target = new ArrayBuffer(num);\n                targetArray = new Uint8Array(target);\n\n                sourceArray = new Uint8Array(this, begin, num);\n                targetArray.set(sourceArray);\n\n                return target;\n            };\n        })();\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * Helpers.\n     */\n\n    function toUtf8(str) {\n        if (/[\\u0080-\\uFFFF]/.test(str)) {\n            str = unescape(encodeURIComponent(str));\n        }\n\n        return str;\n    }\n\n    function utf8Str2ArrayBuffer(str, returnUInt8Array) {\n        var length = str.length,\n           buff = new ArrayBuffer(length),\n           arr = new Uint8Array(buff),\n           i;\n\n        for (i = 0; i < length; i += 1) {\n            arr[i] = str.charCodeAt(i);\n        }\n\n        return returnUInt8Array ? arr : buff;\n    }\n\n    function arrayBuffer2Utf8Str(buff) {\n        return String.fromCharCode.apply(null, new Uint8Array(buff));\n    }\n\n    function concatenateArrayBuffers(first, second, returnUInt8Array) {\n        var result = new Uint8Array(first.byteLength + second.byteLength);\n\n        result.set(new Uint8Array(first));\n        result.set(new Uint8Array(second), first.byteLength);\n\n        return returnUInt8Array ? result : result.buffer;\n    }\n\n    function hexToBinaryString(hex) {\n        var bytes = [],\n            length = hex.length,\n            x;\n\n        for (x = 0; x < length - 1; x += 2) {\n            bytes.push(parseInt(hex.substr(x, 2), 16));\n        }\n\n        return String.fromCharCode.apply(String, bytes);\n    }\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation.\n     *\n     * Use this class to perform an incremental md5, otherwise use the\n     * static methods instead.\n     */\n\n    function SparkMD5() {\n        // call reset to init the instance\n        this.reset();\n    }\n\n    /**\n     * Appends a string.\n     * A conversion will be applied if an utf8 string is detected.\n     *\n     * @param {String} str The string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.append = function (str) {\n        // Converts the string to utf8 bytes if necessary\n        // Then append as binary\n        this.appendBinary(toUtf8(str));\n\n        return this;\n    };\n\n    /**\n     * Appends a binary string.\n     *\n     * @param {String} contents The binary string to be appended\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.appendBinary = function (contents) {\n        this._buff += contents;\n        this._length += contents.length;\n\n        var length = this._buff.length,\n            i;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk(this._buff.substring(i - 64, i)));\n        }\n\n        this._buff = this._buff.substring(i - 64);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            i,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff.charCodeAt(i) << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.reset = function () {\n        this._buff = '';\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.prototype.getState = function () {\n        return {\n            buff: this._buff,\n            length: this._length,\n            hash: this._hash\n        };\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5} The instance itself\n     */\n    SparkMD5.prototype.setState = function (state) {\n        this._buff = state.buff;\n        this._length = state.length;\n        this._hash = state.hash;\n\n        return this;\n    };\n\n    /**\n     * Releases memory used by the incremental buffer and other additional\n     * resources. If you plan to use the instance again, use reset instead.\n     */\n    SparkMD5.prototype.destroy = function () {\n        delete this._hash;\n        delete this._buff;\n        delete this._length;\n    };\n\n    /**\n     * Finish the final calculation based on the tail.\n     *\n     * @param {Array}  tail   The tail (will be modified)\n     * @param {Number} length The length of the remaining buffer\n     */\n    SparkMD5.prototype._finish = function (tail, length) {\n        var i = length,\n            tmp,\n            lo,\n            hi;\n\n        tail[i >> 2] |= 0x80 << ((i % 4) << 3);\n        if (i > 55) {\n            md5cycle(this._hash, tail);\n            for (i = 0; i < 16; i += 1) {\n                tail[i] = 0;\n            }\n        }\n\n        // Do the final computation based on the tail and length\n        // Beware that the final length may not fit in 32 bits so we take care of that\n        tmp = this._length * 8;\n        tmp = tmp.toString(16).match(/(.*?)(.{0,8})$/);\n        lo = parseInt(tmp[2], 16);\n        hi = parseInt(tmp[1], 16) || 0;\n\n        tail[14] = lo;\n        tail[15] = hi;\n        md5cycle(this._hash, tail);\n    };\n\n    /**\n     * Performs the md5 hash on a string.\n     * A conversion will be applied if utf8 string is detected.\n     *\n     * @param {String}  str The string\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hash = function (str, raw) {\n        // Converts the string to utf8 bytes if necessary\n        // Then compute it using the binary function\n        return SparkMD5.hashBinary(toUtf8(str), raw);\n    };\n\n    /**\n     * Performs the md5 hash on a binary string.\n     *\n     * @param {String}  content The binary string\n     * @param {Boolean} raw     True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.hashBinary = function (content, raw) {\n        var hash = md51(content),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    // ---------------------------------------------------\n\n    /**\n     * SparkMD5 OOP implementation for array buffers.\n     *\n     * Use this class to perform an incremental md5 ONLY for array buffers.\n     */\n    SparkMD5.ArrayBuffer = function () {\n        // call reset to init the instance\n        this.reset();\n    };\n\n    /**\n     * Appends an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array to be appended\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.append = function (arr) {\n        var buff = concatenateArrayBuffers(this._buff.buffer, arr, true),\n            length = buff.length,\n            i;\n\n        this._length += arr.byteLength;\n\n        for (i = 64; i <= length; i += 64) {\n            md5cycle(this._hash, md5blk_array(buff.subarray(i - 64, i)));\n        }\n\n        this._buff = (i - 64) < length ? new Uint8Array(buff.buffer.slice(i - 64)) : new Uint8Array(0);\n\n        return this;\n    };\n\n    /**\n     * Finishes the incremental computation, reseting the internal state and\n     * returning the result.\n     *\n     * @param {Boolean} raw True to get the raw string, false to get the hex string\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.prototype.end = function (raw) {\n        var buff = this._buff,\n            length = buff.length,\n            tail = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],\n            i,\n            ret;\n\n        for (i = 0; i < length; i += 1) {\n            tail[i >> 2] |= buff[i] << ((i % 4) << 3);\n        }\n\n        this._finish(tail, length);\n        ret = hex(this._hash);\n\n        if (raw) {\n            ret = hexToBinaryString(ret);\n        }\n\n        this.reset();\n\n        return ret;\n    };\n\n    /**\n     * Resets the internal state of the computation.\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.reset = function () {\n        this._buff = new Uint8Array(0);\n        this._length = 0;\n        this._hash = [1732584193, -271733879, -1732584194, 271733878];\n\n        return this;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @return {Object} The state\n     */\n    SparkMD5.ArrayBuffer.prototype.getState = function () {\n        var state = SparkMD5.prototype.getState.call(this);\n\n        // Convert buffer to a string\n        state.buff = arrayBuffer2Utf8Str(state.buff);\n\n        return state;\n    };\n\n    /**\n     * Gets the internal state of the computation.\n     *\n     * @param {Object} state The state\n     *\n     * @return {SparkMD5.ArrayBuffer} The instance itself\n     */\n    SparkMD5.ArrayBuffer.prototype.setState = function (state) {\n        // Convert string to buffer\n        state.buff = utf8Str2ArrayBuffer(state.buff, true);\n\n        return SparkMD5.prototype.setState.call(this, state);\n    };\n\n    SparkMD5.ArrayBuffer.prototype.destroy = SparkMD5.prototype.destroy;\n\n    SparkMD5.ArrayBuffer.prototype._finish = SparkMD5.prototype._finish;\n\n    /**\n     * Performs the md5 hash on an array buffer.\n     *\n     * @param {ArrayBuffer} arr The array buffer\n     * @param {Boolean}     raw True to get the raw string, false to get the hex one\n     *\n     * @return {String} The result\n     */\n    SparkMD5.ArrayBuffer.hash = function (arr, raw) {\n        var hash = md51_array(new Uint8Array(arr)),\n            ret = hex(hash);\n\n        return raw ? hexToBinaryString(ret) : ret;\n    };\n\n    return SparkMD5;\n}));\n","'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto implementation.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && msCrypto.getRandomValues.bind(msCrypto));\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n","import { btoa, readAsArrayBuffer } from 'pouchdb-binary-utils';\nimport Md5 from 'spark-md5';\n\nvar setImmediateShim = global.setImmediate || global.setTimeout;\nvar MD5_CHUNK_SIZE = 32768;\n\nfunction rawToBase64(raw) {\n  return btoa(raw);\n}\n\nfunction sliceBlob(blob, start, end) {\n  if (blob.webkitSlice) {\n    return blob.webkitSlice(start, end);\n  }\n  return blob.slice(start, end);\n}\n\nfunction appendBlob(buffer, blob, start, end, callback) {\n  if (start > 0 || end < blob.size) {\n    // only slice blob if we really need to\n    blob = sliceBlob(blob, start, end);\n  }\n  readAsArrayBuffer(blob, function (arrayBuffer) {\n    buffer.append(arrayBuffer);\n    callback();\n  });\n}\n\nfunction appendString(buffer, string, start, end, callback) {\n  if (start > 0 || end < string.length) {\n    // only create a substring if we really need to\n    string = string.substring(start, end);\n  }\n  buffer.appendBinary(string);\n  callback();\n}\n\nfunction binaryMd5(data, callback) {\n  var inputIsString = typeof data === 'string';\n  var len = inputIsString ? data.length : data.size;\n  var chunkSize = Math.min(MD5_CHUNK_SIZE, len);\n  var chunks = Math.ceil(len / chunkSize);\n  var currentChunk = 0;\n  var buffer = inputIsString ? new Md5() : new Md5.ArrayBuffer();\n\n  var append = inputIsString ? appendString : appendBlob;\n\n  function next() {\n    setImmediateShim(loadNextChunk);\n  }\n\n  function done() {\n    var raw = buffer.end(true);\n    var base64 = rawToBase64(raw);\n    callback(base64);\n    buffer.destroy();\n  }\n\n  function loadNextChunk() {\n    var start = currentChunk * chunkSize;\n    var end = start + chunkSize;\n    currentChunk++;\n    if (currentChunk < chunks) {\n      append(buffer, data, start, end, next);\n    } else {\n      append(buffer, data, start, end, done);\n    }\n  }\n  loadNextChunk();\n}\n\nfunction stringMd5(string) {\n  return Md5.hash(string);\n}\n\nexport { binaryMd5, stringMd5 };\n","declare const window:any;\n\nimport { deleteAdmin, getMembership, signUpAdmin } from \"./admins\";\nimport { getSession, logIn, logOut } from \"./authentication\";\nimport {\n  changePassword,\n  changeUsername,\n  deleteUser,\n  getUser,\n  getUsersDatabaseUrl,\n  putUser,\n  signUp,\n} from \"./users\";\n\nlet plugin:any = {};\n\nplugin.login = logIn;\nplugin.logIn = logIn;\nplugin.logout = logOut;\nplugin.logOut = logOut;\nplugin.getSession = getSession;\n\nplugin.getMembership = getMembership;\nplugin.signUpAdmin = signUpAdmin;\nplugin.deleteAdmin = deleteAdmin;\n\nplugin.getUsersDatabaseUrl = getUsersDatabaseUrl;\nplugin.signup = signUp;\nplugin.signUp = signUp;\nplugin.getUser = getUser;\nplugin.putUser = putUser;\nplugin.deleteUser = deleteUser;\nplugin.changePassword = changePassword;\nplugin.changeUsername = changeUsername;\n\nif (typeof window !== 'undefined' && window.PouchDB) {\n  window.PouchDB.plugin(plugin);\n}\n\n// export default plugin;\nexport { plugin };\n","import { AuthError           } from './utils'       ;\nimport { PDB                 } from './utils'       ;\nimport { PouchDBUserDoc      } from './utils'       ;\nimport { PutUserOptions      } from './utils'       ;\nimport { BasicResponse       } from './utils'       ;\nimport { LoginOptions        } from './utils'       ;\nimport { CouchNodeMembership } from './utils'       ;\nimport { doFetch             } from './utils'       ;\nimport { getBasicAuthHeaders } from './utils'       ;\nimport { getBaseUrl          } from './utils'       ;\nimport { assign              } from 'pouchdb-utils' ;\nimport { toPromise           } from 'pouchdb-utils' ;\n\n\nconst getConfigUrl = function(db:PDB, nodeName?:string):string {\n  return (nodeName ? '/_node/' + nodeName : '') + '/_config';\n}\n\nconst getMembership = async function(opts:LoginOptions):Promise<CouchNodeMembership> {\n  try {\n    let db:PDB = this;\n    let dbURL:string = getBaseUrl(db);\n    let url:string = dbURL + '/_membership';\n    let ajaxOpts:any = assign({\n      method: 'GET',\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n    let res:CouchNodeMembership = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst signUpAdmin = async function(username:string, password:string, opts:LoginOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if(!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    } else if(!password) {\n      let err:AuthError = new AuthError('You must provide a password');\n      throw err;\n    }\n\n    let membership:CouchNodeMembership\n    let nodeName:string;\n    try {\n      membership = await db.getMembership(opts);\n      // This is a CouchDB 2.x server\n      nodeName = membership.all_nodes[0];\n    } catch(err) {\n      if(err.error && err.error === 'illegal_database_name') {\n        throw err;\n      } else {\n        // This could be a CouchDB 1.x server\n        nodeName = undefined;\n      }\n    }\n    let configUrl:string = getConfigUrl(db, nodeName);\n    let url:string = ((opts as any).configUrl || configUrl) + '/admins/' + encodeURIComponent(username);\n    let ajaxOpts:any = assign({\n      method: 'PUT',\n      processData: false,\n      headers: getBasicAuthHeaders(db),\n      body: '\"' + password + '\"',\n    }, (opts as any).ajax || {});\n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst deleteAdmin = async function(username:string, opts:LoginOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if(!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    }\n  \n    let membership:CouchNodeMembership\n    let nodeName:string;\n    try {\n      membership = await db.getMembership(opts);\n      // This is a CouchDB 2.x server\n      nodeName = membership.all_nodes[0];\n    } catch(err) {\n      if(err.error && err.error === 'illegal_database_name') {\n        throw err;\n      } else {\n        // This could be a CouchDB 1.x server\n        nodeName = undefined;\n      }\n    }\n    let configUrl:string = getConfigUrl(db, nodeName);\n    let url:string = ((opts as any).configUrl || configUrl) + '/admins/' + encodeURIComponent(username);\n    let ajaxOpts:any = assign({\n      method: 'DELETE',\n      processData: false,\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n\n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nexport { getMembership, deleteAdmin, signUpAdmin };","// AbortController was introduced quite a while after fetch and\n// isnt required for PouchDB to function so polyfill if needed\nvar a = (typeof AbortController !== 'undefined')\n    ? AbortController\n    : function () { return {abort: function () {}}; };\n\nvar f = fetch;\nvar h = Headers;\n\nexport { f as fetch, h as Headers, a as AbortController };\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\nvar _nodeId;\nvar _clockseq;\n\n// Previous uuid creation time\nvar _lastMSecs = 0;\nvar _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n  var node = options.node || _nodeId;\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // node and clockseq need to be initialized to random values if they're not\n  // specified.  We do this lazily to minimize issues related to insufficient\n  // system entropy.  See #189\n  if (node == null || clockseq == null) {\n    var seedBytes = rng();\n    if (node == null) {\n      // Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\n      node = _nodeId = [\n        seedBytes[0] | 0x01,\n        seedBytes[1], seedBytes[2], seedBytes[3], seedBytes[4], seedBytes[5]\n      ];\n    }\n    if (clockseq == null) {\n      // Per 4.2.2, randomize (14 bit) clockseq\n      clockseq = _clockseq = (seedBytes[6] << 8 | seedBytes[7]) & 0x3fff;\n    }\n  }\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import { AuthError           } from './utils' ;\nimport { PDB                 } from './utils' ;\nimport { LoginOptions        } from './utils' ;\nimport { LoginResponse       } from './utils' ;\nimport { BasicResponse       } from './utils' ;\nimport { SessionResponse     } from './utils' ;\nimport { doFetch             } from './utils' ;\nimport { getBasicAuthHeaders } from './utils' ;\n\nimport { assign, toPromise } from 'pouchdb-utils';\n\nconst logIn = async function(username:string, password:string, opts:LoginOptions):Promise<LoginResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      // return callback(new AuthError('this plugin only works for the http/https adapter'));\n      let err:Error = new Error(\"pouchdb-authentication plugin only works for the http/https adapter\");\n      throw err;\n    }\n  \n    if(!username) {\n      // return callback(new AuthError('you must provide a username'));\n      let err:Error = new Error(\"you must provide a username\");\n      throw err;\n    } else if (!password) {\n      // return callback(new AuthError('you must provide a password'));\n      let err:Error = new Error(\"you must provide a password\");\n      throw err;\n    }\n  \n    let url:string = '/_session';\n    let ajaxOpts:any = assign({\n      method: 'POST',\n      headers: assign({'Content-Type': 'application/json'}, getBasicAuthHeaders(db)),\n      body: {name: username, password: password},\n    }, (opts as any).ajax || {});\n\n    let res:LoginResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst logOut = async function (opts:LoginOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    let url:string = '/_session';\n    let ajaxOpts:any = assign({\n      method: 'DELETE',\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n  \n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst getSession = async function ():Promise<SessionResponse> {\n  try {\n    let db:PDB = this;\n    let url:string = '/_session';\n    let ajaxOpts:any = {\n      method: 'GET',\n      headers: getBasicAuthHeaders(db),\n    };\n    let res:SessionResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nexport { logIn, logOut, getSession };\n","import { AuthError           } from './utils'       ;\nimport { PDB                 } from './utils'       ;\nimport { PouchDBUserDoc      } from './utils'       ;\nimport { PutUserOptions      } from './utils'       ;\nimport { BasicResponse       } from './utils'       ;\nimport { LoginOptions        } from './utils'       ;\nimport { doFetch             } from './utils'       ;\nimport { getBasicAuthHeaders } from './utils'       ;\nimport { getBaseUrl          } from './utils'       ;\nimport { assign              } from 'pouchdb-utils' ;\nimport { clone               } from 'pouchdb-utils' ;\nimport { toPromise           } from 'pouchdb-utils' ;\n\nimport * as PouchDB from 'pouchdb-core';\n\nconst getUsersDatabaseUrl = function():string {\n  let db:PDB = this;\n  return getBaseUrl(db) + '/_users';\n};\n\nconst updateUser = async function(db:PDB, user:PouchDBUserDoc, opts:PutUserOptions):Promise<BasicResponse> {\n  try {\n    let reservedWords:string[] = [\n      '_id',\n      '_rev',\n      'name',\n      'type',\n      'roles',\n      'password',\n      'password_scheme',\n      'iterations',\n      'derived_key',\n      'salt',\n    ];\n  \n    if(opts.metadata) {\n      for(let key in opts.metadata) {\n        if(opts.metadata.hasOwnProperty(key) && reservedWords.indexOf(key) !== -1) {\n          let err:AuthError = new AuthError('cannot use reserved word in metadata: \"' + key + '\"');\n          throw err;\n        }\n      }\n      user = assign(user, opts.metadata);\n    }\n  \n    if(opts.roles) {\n      user = assign(user, {roles: opts.roles});\n    }\n  \n    let url:string = '/_users/' + encodeURIComponent(user._id);\n    let ajaxOpts:any = assign({\n      method: 'PUT',\n      body: user,\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n  \n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst signUp = async function (username:string, password:string, opts:PutUserOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if (!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    } else if (!password) {\n      let err:AuthError = new AuthError('You must provide a password');\n      throw err;\n    }\n  \n    let userId:string = 'org.couchdb.user:' + username;\n    let user:PouchDBUserDoc = {\n      name: username,\n      password: password,\n      roles: [],\n      type: 'user',\n      _id: userId,\n    };\n  \n    let res:BasicResponse = await updateUser(db, user, opts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst getUser = async function(username:string, opts:LoginOptions):Promise<PouchDBUserDoc> {\n  try {\n    let db:PDB = this;\n    if(!username) {\n      let err:AuthError = new AuthError('you must provide a username');\n      throw err;\n    }\n  \n    let url:string = '/_users/' + encodeURIComponent('org.couchdb.user:' + username);\n    let ajaxOpts:any = assign({\n      method: 'GET',\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n  \n    let res:PouchDBUserDoc = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst putUser = async function (username:string, opts:PutUserOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if(!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    }\n  \n    let user:PouchDBUserDoc = await db.getUser(username, opts);\n    let res:BasicResponse = await updateUser(db, user, opts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst deleteUser = async function(username:string, opts:LoginOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if (['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if(!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    }\n  \n    let user:PouchDBUserDoc = await db.getUser(username, opts);\n    let url:string = '/_users/' + encodeURIComponent(user._id) + '?rev=' + user._rev;\n    let ajaxOpts:any = assign({\n      method: 'DELETE',\n      headers: getBasicAuthHeaders(db),\n    }, (opts as any).ajax || {});\n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst changePassword = async function(username:string, password:string, opts:LoginOptions):Promise<BasicResponse> {\n  try {\n    let db:PDB = this;\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    } else if(!username) {\n      let err:AuthError = new AuthError('You must provide a username');\n      throw err;\n    } else if(!password) {\n      let err:AuthError = new AuthError('You must provide a password');\n      throw err;\n    }\n\n    let user:PouchDBUserDoc = await db.getUser(username, opts);\n    user.password = password;\n    let url:string = '/_users/' + encodeURIComponent(user._id);\n    let ajaxOpts:any = assign({\n      method: 'PUT',\n      headers: getBasicAuthHeaders(db),\n      body: user,\n    }, (opts as any).ajax || {});\n    let res:BasicResponse = await doFetch(db, url, ajaxOpts);\n    return res;\n  } catch(err) {\n    throw err;\n  }\n};\n\nconst changeUsername = async function(oldUsername:string, newUsername:string, opts:PutUserOptions):Promise<BasicResponse> {\n  try {\n    \n    let db:PDB = this;\n    let USERNAME_PREFIX:string = 'org.couchdb.user:';\n    const fetch = async function(url:string, opts:LoginOptions):Promise<BasicResponse> {\n      try {\n        let res:BasicResponse = await doFetch(db, url, opts);\n        return res; \n      } catch(err) {\n        throw err;\n      }\n    };\n    const updateUser = async function(user:PouchDBUserDoc, opts:LoginOptions):Promise<BasicResponse> {\n      try {\n        let url:string = '/_users/' + encodeURIComponent(user._id);\n        let updateOpts:any = assign({\n          method: 'PUT',\n          headers: getBasicAuthHeaders(db),\n          body: user,\n        }, (opts as any).ajax || {});\n    \n        let res:BasicResponse = await fetch(url, updateOpts);\n        return res;\n      } catch(err) {\n        throw err;\n      }\n    };\n    (opts as any).ajax = (opts as any).ajax || {};\n    if(['http', 'https'].indexOf(db.type()) === -1) {\n      let err:AuthError = new AuthError('This plugin only works for the http/https adapter. So you should use new PouchDB(\"http://mysite.com:5984/mydb\") instead.');\n      throw err;\n    }\n    if(!newUsername) {\n      let err:AuthError = new AuthError('You must provide a new username');\n      throw err;\n    }\n    if(!oldUsername) {\n      let err:AuthError = new AuthError('You must provide a username to rename');\n      throw err;\n    }\n    try {\n      let res:PouchDBUserDoc = await db.getUser(newUsername, opts);\n      let err:AuthError = new AuthError('user already exists');\n      err.taken = true;\n      throw err;\n    } catch(err) {\n      try {\n        let user:PouchDBUserDoc = await db.getUser(oldUsername, opts);\n        let newUser:PouchDBUserDoc = clone(user);\n        delete newUser._rev;\n        newUser._id = USERNAME_PREFIX + newUsername;\n        newUser.name = newUsername;\n        newUser.roles = opts.roles || user.roles || [];\n        let res:BasicResponse = await updateUser(newUser, opts);\n        user._deleted = true;\n        res = await updateUser(user, opts);\n        return res;\n      } catch(err) {\n        throw err;\n      }\n    }\n  } catch(err) {\n    throw err;\n  }\n};\n\nexport {\n  getUsersDatabaseUrl,\n  signUp,\n  getUser,\n  putUser,\n  deleteUser,\n  changePassword,\n  changeUsername,\n};\n"],"sourceRoot":""}